(()=>{function a(f){f.directive("htmldialog",v);function v(e,{expression:c,modifiers:u},{evaluateLater:g,cleanup:m}){let d=c.length?g(c):()=>{},y=u.includes("noscroll");e.style.display=null,e.hidden=!1,e.style.length===0&&e.removeAttribute("style");function t(o=!0){document.body.style.overflow=o?"hidden":""}function i(o){o.key==="Escape"&&(o.preventDefault(),d())}function s(o){let n=e.getBoundingClientRect();n.top<=o.clientY&&o.clientY<=n.top+n.height&&n.left<=o.clientX&&o.clientX<=n.left+n.width||d()}function l(o){console.log("test if form is invalid.");let n=e.querySelector("form");n&&console.log("found a form",n),n&&!n.checkValidity()&&(o.preventDefault(),console.log("Form is invalid, preventing dialog close"))}function r(o){if(console.log("key pressed"),o.key==="Enter"){console.log("key pressed - key was enter");let n=e.querySelector("form");n&&!n.checkValidity()?(o.preventDefault(),console.log("Enter key pressed, form is invalid, preventing dialog close")):console.log("key pressed - key was enter - form exists and looks good")}}e._x_doShow=()=>{e.hasAttribute("open")||(e.showModal(),document.addEventListener("keydown",i),e.addEventListener("click",s),e.addEventListener("close",l),e.addEventListener("keydown",r),console.log("added close event listener"),t(y))},e._x_doHide=()=>{!e.hasAttribute("open")||(e.close(),document.removeEventListener("keydown",i),e.removeEventListener("click",s),e.removeEventListener("close",l),e.removeEventListener("keydown",r),console.log("Removed close event listener"),t(!1))},m(()=>{document.removeEventListener("keydown",i),e.removeEventListener("click",s),e.removeEventListener("close",l),e.removeEventListener("keydown",r),console.log("Removed close event listener"),t(!1)})}}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(a)});})();
