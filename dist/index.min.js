(()=>{function a(f){f.directive("htmldialog",u);function u(e,{expression:c,modifiers:v},{evaluateLater:g,cleanup:m}){let s=c.length?g(c):()=>{},p=v.includes("noscroll");e.style.display=null,e.hidden=!1,e.style.length===0&&e.removeAttribute("style");function t(n=!0){document.body.style.overflow=n?"hidden":""}function i(n){n.key==="Escape"&&(n.preventDefault(),s())}function r(n){let o=e.getBoundingClientRect();o.top<=n.clientY&&n.clientY<=o.top+o.height&&o.left<=n.clientX&&n.clientX<=o.left+o.width||s()}function l(n){console.log("test if form is invalid.");let o=e.querySelector("form");o&&console.log("found a form",o),o&&!o.checkValidity()&&(n.preventDefault(),console.log("Form is invalid, preventing dialog close"))}function d(n){if(n.key==="Enter"){let o=e.querySelector("form");o&&!o.checkValidity()&&(n.preventDefault(),console.log("Enter key pressed, form is invalid, preventing dialog close"))}}e._x_doShow=()=>{e.hasAttribute("open")||(e.showModal(),document.addEventListener("keydown",i),e.addEventListener("click",r),e.addEventListener("close",l),e.addEventListener("keydown",d),console.log("added close event listener"),t(p))},e._x_doHide=()=>{!e.hasAttribute("open")||(e.close(),document.removeEventListener("keydown",i),e.removeEventListener("click",r),e.removeEventListener("close",l),e.removeEventListener("keydown",d),console.log("Removed close event listener"),t(!1))},m(()=>{document.removeEventListener("keydown",i),e.removeEventListener("click",r),e.removeEventListener("close",l),t(!1)})}}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(a)});})();
